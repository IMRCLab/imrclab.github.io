<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Wolfgang Hönig">
  <meta name="dcterms.date" content="2025-01-31">
  <title>Flying Robots</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4/dist/reset.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4/dist/reveal.css">
  <style>
    .reveal .sourceCode {  /* see #7635 */
      overflow: visible;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4/dist/theme/black.css" id="theme">
  <link rel="stylesheet" href="custom.css"/>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="media/title_dark.svg" data-background-size="contain">
  <h1 class="title">Flying Robots</h1>
  <p class="subtitle">Motion Planning</p>
  <p class="author">Wolfgang Hönig</p>
  <p class="date">January 31, 2025</p>
</section>

<section id="math-definitions" class="slide level2"
data-visibility="hidden">
<h2 data-visibility="hidden">Math definitions</h2>
<p>% vectors % custom math commands % </p>
</section>
<section>
<section id="motion-planning" class="title-slide slide level1">
<h1>Motion Planning</h1>

</section>
<section id="motivation" class="slide level2">
<h2>Motivation</h2>
<ul>
<li>Controllers need current state (<em>MEKF</em>) and desired
state</li>
<li>Desired states should be <em>feasible</em>
<!-- - follow dynamics $\dot{\vx}$
    - avoid obstacles / other robots --></li>
</ul>
<div class="box-ex">
<p>We have:</p>
<ul>
<li>State: <span class="math inline">\(\mathbf{x}= (\mathbf{p},
\mathbf{v}, \mathbf{R}, \boldsymbol{\omega})^\top \in \mathbb R^3 \times
\mathbb R^3 \times SO(3) \times \mathbb R^3\)</span></li>
<li>Action: <span class="math inline">\(\mathbf{u}= (f_1, f_2, f_3,
f_4)^\top \in \mathbb R^4\)</span></li>
</ul>
</div>
<p>Motion Planning: given start state <span
class="math inline">\(\mathbf{x}_s\)</span> and goal state <span
class="math inline">\(\mathbf{x}_g\)</span>, find a sequence of states
and actions that are collision-free, obey the robot dynamics, start at
<span class="math inline">\(\mathbf{x}_s\)</span> and end at <span
class="math inline">\(\mathbf{x}_g\)</span></p>
</section>
<section id="formal-definition" class="slide level2">
<h2>Formal Definition</h2>
<p><span class="math display">\[
\begin{align}
\mathop{\mathrm{argmin}}_{T, \mathbf{u}(t), \mathbf{x}(t)} \quad J(T,
\mathbf{u}(t), \mathbf{x}(t)) \quad \text{s.t.}\\
\mathbf{x}(0) = \mathbf{x}_{s} \quad \mathbf{x}(T) = \mathbf{q}_{g}\\
\mathcal{B}(\mathbf{x}(t)) \subset \mathcal{W}_{free} \quad \forall t
\in [0, T]\\
\dot{\mathbf{x}}(t) = \mathbf{f}(\mathbf{x}(t), \mathbf{u}(t)) \quad
\forall t \in [0, T)
\end{align}
\]</span></p>
<div class="box-red">
<p>Path planning (or sometimes geometric planning ignores the dynamics
constraint <span class="math inline">\(\dot{\mathbf{x}}(t) =
\mathbf{f}(\mathbf{x}(t), \mathbf{u}(t))\)</span> (and thus becomes
independent of time).</p>
</div>
</section>
<section id="approaches" class="slide level2">
<h2>Approaches</h2>
<ol type="1">
<li><em>Search</em>: A* and variants</li>
</ol>
<p>Build a graph that keeps track of cost-to-come and cost-to-go. For
motion planning: edges are state sequences that follow the dynamics
(e.g., left turn).</p>
<ol start="2" type="1">
<li><em>Sampling</em>: RRT and variants</li>
</ol>
<p>Sample random states and try to connect them to existing states.</p>
<ol start="3" type="1">
<li><em>Optimization</em>: Splines, SCP, NLP</li>
</ol>
<p>Solve a convex or nonlinear program that directly or indirectly
encodes the motion planning problem.</p>
<div class="box-ex">
<p>All three (and hybrid variants) are relevant for flying robots.</p>
</div>
</section>
<section id="background-differential-flatness" class="slide level2">
<h2>Background: Differential Flatness</h2>
<div class="box-ex">
<div class="box-ex-title">
<p>Differentially Flat System</p>
</div>
<p>A robot with dynamics <span class="math inline">\(\dot{\mathbf{x}} =
\mathbf{f}(\mathbf{x}, \mathbf{u})\)</span> is <em>differentally
flat</em> if we can find <em>flat outputs</em> <span
class="math inline">\(\mathbf{z}(t)\)</span> such that: <span
class="math display">\[\begin{align*}
\mathbf{x}(t) &amp;= g_q(\mathbf{z}, \dot{\mathbf{z}},
\ddot{\mathbf{z}}, \ldots)\\
\mathbf{u}(t) &amp;= g_u(\mathbf{z}, \dot{\mathbf{z}},
\ddot{\mathbf{z}}, \ldots).
\end{align*}\]</span> That is, we can compute the configuration and
action sequence from <span class="math inline">\(\mathbf{z}(t)\)</span>
and a finite number of derivatives of <span
class="math inline">\(\mathbf{z}(t)\)</span>.</p>
</div>
</section>
<section
id="differential-flatness-for-multirotors-mellingerminimumsnaptrajectory20112018-faessler-differentialflatnessquadrotor"
class="slide level2">
<h2>Differential Flatness for Multirotors <span class="citation"
data-cites="mellingerMinimumSnapTrajectory2011 2018-faessler-DifferentialFlatnessQuadrotor">(Mellinger
and Kumar 2011; Faessler, Franchi, and Scaramuzza 2018)</span></h2>
<p>Pick flat output of position and yaw: <span
class="math inline">\(\mathbf{z}= [\mathbf{p}, \psi]^\top\)</span>,
i.e., we need <span class="math inline">\(\mathbf{p}, \dot{\mathbf{p}},
\ddot{\mathbf{p}}, \dddot{\mathbf{p}}, \ddddot{\mathbf{p}}, \psi,
\dot{\psi}, \ddot{\psi}\)</span></p>
<p>Dynamics with <span class="math inline">\(\mathbf{R}\)</span>: <span
class="math display">\[\begin{align}
    &amp;\dot{\mathbf{p}} = \mathbf{v}, &amp;&amp; m\mathbf{\dot{v}} =
m\mathbf{g} + f \mathbf{R} \mathbf{e}_3,\\
    &amp;\dot{\mathbf{R}} = \mathbf{R}\boldsymbol{\hat{\omega}},
&amp;&amp;
    \mathbf{J}\dot{\boldsymbol{\omega}} =
\mathbf{J}\boldsymbol{\omega}\times \boldsymbol{\omega}+
\boldsymbol{\tau}_u,
\end{align}\]</span></p>
<p>Our flat outputs already contain <span
class="math inline">\(\mathbf{p}\)</span> and <span
class="math inline">\(\mathbf{v}\)</span>. We need to find expressions
for other states (<span class="math inline">\(\mathbf{R},
\boldsymbol{\omega}\)</span>) and actions (<span
class="math inline">\(f\)</span>, <span
class="math inline">\(\boldsymbol{\tau}_u\)</span>)</p>
</section>
<section
id="differential-flatness-for-multirotors-rotation-2018-faessler-differentialflatnessquadrotor"
class="slide level2">
<h2>Differential Flatness for Multirotors: Rotation <span
class="citation"
data-cites="2018-faessler-DifferentialFlatnessQuadrotor">(Faessler,
Franchi, and Scaramuzza 2018)</span></h2>
<p>Approach: select rotation, such that <span
class="math inline">\(m\mathbf{\ddot{p}} = m\mathbf{g} + f \mathbf{R}
\mathbf{e}_3\)</span> is true</p>
<p><span class="math display">\[
\begin{align}
\mathbf{x}_c &amp;= \begin{bmatrix} \cos(\psi) &amp; \sin(\psi) &amp;
0\end{bmatrix}^\top\\
\mathbf{y}_c &amp;= \begin{bmatrix} -\sin(\psi) &amp; \cos(\psi) &amp;
0\end{bmatrix}^\top\\
\mathbf{x}_b &amp;= n(\mathbf{y}_c \times (\ddot{\mathbf{p}} -
\mathbf{g}))\\
\mathbf{y}_b &amp;= n((\ddot{\mathbf{p}} - \mathbf{g}) \times
\mathbf{x}_b)\\
\mathbf{z}_b &amp;= \mathbf{x}_b \times \mathbf{y}_b
\end{align}
\]</span></p>
<p><span class="math inline">\(\mathbf{R}= \begin{bmatrix} \mathbf{x}_b
&amp; \mathbf{y}_b &amp; \mathbf{z}_b \end{bmatrix}\)</span> (a function
of <span class="math inline">\(\ddot{\mathbf{p}}, \psi\)</span>)</p>
<div class="box-ex">
<p>Conceptually the same as in controls lecture. Slight change, because
we’ll use the temporary variables later.</p>
</div>
</section>
<section
id="differential-flatness-for-multirotors-force-2018-faessler-differentialflatnessquadrotor"
class="slide level2">
<h2>Differential Flatness for Multirotors: Force <span class="citation"
data-cites="2018-faessler-DifferentialFlatnessQuadrotor">(Faessler,
Franchi, and Scaramuzza 2018)</span></h2>
<p>Approach: solve <span class="math inline">\(m\mathbf{\ddot{p}} =
m\mathbf{g} + f \mathbf{R} \mathbf{e}_3\)</span> for <span
class="math inline">\(f\)</span></p>
<p><span class="math display">\[
\begin{align}
c &amp;= \mathbf{z}_b^\top (\ddot{\mathbf{p}} - \mathbf{g})\\
\end{align}
\]</span></p>
<p><span class="math inline">\(f = m c\)</span> (a function of <span
class="math inline">\(\ddot{\mathbf{p}}, \psi\)</span>)</p>
</section>
<section
id="differential-flatness-for-multirotors-angular-velocity-2018-faessler-differentialflatnessquadrotor"
class="slide level2">
<h2>Differential Flatness for Multirotors: Angular Velocity <span
class="citation"
data-cites="2018-faessler-DifferentialFlatnessQuadrotor">(Faessler,
Franchi, and Scaramuzza 2018)</span></h2>
<p>Approach: compute time-derivative of <span
class="math inline">\(m\mathbf{\ddot{p}} = m\mathbf{g} + f \mathbf{R}
\mathbf{e}_3\)</span>, use <span class="math inline">\(\dot{\mathbf{R}}
= \mathbf{R}\hat{\boldsymbol{\omega}}\)</span>, solve for <span
class="math inline">\(\boldsymbol{\omega}\)</span></p>
<p><span class="math display">\[
\begin{align}
d_1 &amp;= \mathbf{x}_b^\top \dddot{\mathbf{p}} &amp;
d_2 &amp;= -\mathbf{y}_b^\top \dddot{\mathbf{p}} \\
b_3 &amp;= -\mathbf{y}_c^\top \mathbf{z}_b &amp;
c_3 &amp;= \| \mathbf{y}_c \times \mathbf{z}_b \|&amp;
d_3 &amp;= \dot \psi \mathbf{x}_c^\top \mathbf{x}_b\\
\omega_x &amp;= \frac{d_2}{c} &amp;
\omega_y &amp;= \frac{d_1}{c} &amp;
\omega_z &amp;= \frac{c d_3 - b_3 d_1}{c c_3}
\end{align}
\]</span></p>
<p><span class="math inline">\(\boldsymbol{\omega}= \begin{bmatrix}
\omega_x &amp; \omega_y &amp; \omega_z \end{bmatrix}^\top\)</span> (a
function of <span class="math inline">\(\ddot{\mathbf{p}},
\dddot{\mathbf{p}}, \psi, \dot{\psi}\)</span>)</p>
<div class="box-red">
<p>Note that <span class="math inline">\(\omega_z\)</span> is wrong in
<span class="citation"
data-cites="mellingerMinimumSnapTrajectory2011">(Mellinger and Kumar
2011)</span> and in our controls lecture. Details are in <span
class="citation"
data-cites="2018-faessler-DifferentialFlatnessQuadrotor">(Faessler,
Franchi, and Scaramuzza 2018)</span> (Appendix A).</p>
</div>
</section>
<section
id="differential-flatness-for-multirotors-angular-acceleration-2018-faessler-differentialflatnessquadrotor"
class="slide level2">
<h2>Differential Flatness for Multirotors: Angular Acceleration <span
class="citation"
data-cites="2018-faessler-DifferentialFlatnessQuadrotor">(Faessler,
Franchi, and Scaramuzza 2018)</span></h2>
<p>Approach: differentiate <span
class="math inline">\(m\mathbf{\ddot{p}} = m\mathbf{g} + f \mathbf{R}
\mathbf{e}_3\)</span> twice, solve for <span
class="math inline">\(\dot{\boldsymbol{\omega}}\)</span></p>
<p><span class="math display">\[
\begin{align}
\dot{c} &amp;= \mathbf{z}_b^\top \dddot{\mathbf{p}}\\
e_1 &amp;= \mathbf{x}_b^\top \ddddot{\mathbf{p}} - 2\dot{c} \omega_y - c
\omega_x \omega_z\\
e_2 &amp;= -\mathbf{y}_b^\top \ddddot{\mathbf{p}} - 2\dot{c} \omega_x +
c \omega_y \omega_z\\
e_3 &amp;= \ddot{\psi} \mathbf{x}_c^\top \mathbf{x}_b + 2 \dot{\psi}
\omega_z \mathbf{x}_c^\top \mathbf{y}_b - 2 \dot{\psi} \omega_y
\mathbf{x}_c^\top \mathbf{z}_b - \omega_x \omega_y \mathbf{y}_c^\top
\mathbf{y}_b - \omega_x \omega_z \mathbf{y}_c^\top \mathbf{z}_b\\
\end{align}
\]</span> <span class="math display">\[
\begin{align}
\dot{\omega}_x &amp;= \frac{e_2}{c}&amp;
\dot{\omega}_y &amp;= \frac{e_1}{c}&amp;
\dot{\omega}_z &amp;= \frac{c e_3 - b_3 e_1}{c c_3}\\
\end{align}
\]</span></p>
<p><span class="math inline">\(\dot{\boldsymbol{\omega}} =
\begin{bmatrix} \dot{\omega}_x &amp; \dot{\omega}_y &amp; \dot{\omega}_z
\end{bmatrix}^\top\)</span> (a function of <span
class="math inline">\(\ddot{\mathbf{p}}, \dddot{\mathbf{p}},
\ddddot{\mathbf{p}}, \psi, \dot{\psi}, \ddot{\psi}\)</span>)</p>
<div class="box-red">
<p>Note that this was missing in the controls lecture.</p>
</div>
</section>
<section
id="differential-flatness-for-multirotors-torque-2018-faessler-differentialflatnessquadrotor"
class="slide level2">
<h2>Differential Flatness for Multirotors: Torque <span class="citation"
data-cites="2018-faessler-DifferentialFlatnessQuadrotor">(Faessler,
Franchi, and Scaramuzza 2018)</span></h2>
<p>Approach: apply derived <span
class="math inline">\(\boldsymbol{\omega}\)</span> and <span
class="math inline">\(\dot{\boldsymbol{\omega}}\)</span> to dynamics</p>
<p><span class="math inline">\(\boldsymbol{\tau}_u =
\mathbf{J}\dot{\boldsymbol{\omega}} -
\mathbf{J}\boldsymbol{\omega}\times \boldsymbol{\omega}\)</span> (a
function of <span class="math inline">\(\ddot{\mathbf{p}},
\dddot{\mathbf{p}}, \ddddot{\mathbf{p}}, \psi, \dot{\psi},
\ddot{\psi}\)</span>)</p>
</section>
<section
id="differential-flatness-for-multirotors-usage-in-the-nonlinear-controller"
class="slide level2">
<h2>Differential Flatness for Multirotors: Usage in the Nonlinear
Controller</h2>
<ul>
<li>Desired rotation <span class="math inline">\(\mathbf{R}_d\)</span>
is computed based on the desired force (a function of the position and
velocity error); computation is using the differential flatness</li>
<li>Desired angular velocity <span
class="math inline">\(\boldsymbol{\omega}_d\)</span> is computed using
the differential flatness (using <span
class="math inline">\(\mathbf{R}_d\)</span>, rather than <span
class="math inline">\(\mathbf{R}\)</span>)</li>
<li>Desired angular acceleration <span
class="math inline">\(\dot{\boldsymbol{\omega}}_d\)</span> is computed
using the differential flatness</li>
</ul>
</section>
<section id="polynomial-splines" class="slide level2">
<h2>Polynomial Splines</h2>
<div class="box-red">
<p>How does this help for kinodynamic motion planning?</p>
</div>
<div class="fragment">
<div class="box-ex">
<ul>
<li><p>We can plan a trajectory for <span
class="math inline">\(\mathbf{z}(t)\)</span>. By applying <span
class="math inline">\(\mathbf{g}_q\)</span> and <span
class="math inline">\(\mathbf{g}_u\)</span>, we can compute the state
and action sequences for the original motion planning problem!</p></li>
<li><p>If <span class="math inline">\(\mathbf{z}(t)\)</span> is
lower-dimensional than <span class="math inline">\(\mathbf{x}(t),
\mathbf{u}(t)\)</span>, the planning problem is simplified.</p></li>
</ul>
</div>
</div>
</section>
<section id="polynomial-splines-1" class="slide level2">
<h2>Polynomial Splines</h2>
<div class="box-ex">
<div class="box-ex-title">
<p>Polynomial</p>
</div>
<p><span class="math display">\[
p(t) = a_0 + a_1 t + a_2 t^2 + \ldots + a_n t^n = \sum_{k=0}^n a_k t^k
\]</span></p>
</div>
<ul>
<li>Cubic polynomial: <span class="math inline">\(p(t) = a_0 + a_1 t +
a_2 t^2 + a_3 t^3\)</span></li>
</ul>
<div class="fragment">
<div class="box-red">
<p>What are the values at <span class="math inline">\(t=0\)</span> and
<span class="math inline">\(t=1\)</span>? What are <span
class="math inline">\(\dot{p}(0), \dot{p}(1)\)</span></p>
</div>
</div>
<div class="fragment">
<p><span class="math display">\[
\begin{align}
p(0) &amp;= a_0 &amp; p(1) &amp;= a_0 + a_1 + a_2 + a_3\\
\end{align}
\]</span></p>
<p><span class="math display">\[
\begin{align}
\dot{p}(t) &amp;= a_1 + 2 a_2 t + 3 a_3 t^2 &amp; \dot{p}(0) &amp;= a_1
&amp; \dot{p}(1) &amp;= a_1 + 2 a_2 + 3 a_3\\
\ddot{p}(t) &amp;= 2a_2 + 6 a_3 t &amp; \ddot{p}(0) &amp;= 2 a_2 &amp;
\ddot{p}(1) &amp;= 2a_2 + 6 a_3\\
\dddot{p}(t) &amp;= 6 a_3 &amp; \dddot{p}(0) &amp;= 6 a_3 &amp;
\dddot{p}(1) &amp;= 6 a_3
\end{align}
\]</span></p>
</div>
</section>
<section id="polynomial-splines-2" class="slide level2">
<h2>Polynomial Splines</h2>
<p>Assume we represent the trajectory using polynomial splines.</p>
<div class="fragment">
<div class="box-red">
<p>What is the acceleration cost?</p>
</div>
</div>
<div class="fragment">
<p><span class="math display">\[
\begin{align}
J &amp;= \int_{t=0}^1 \ddot{p}(t) dt\\
    &amp;= \int_{t=0}^1  2a_2 + 6 a_3\\
    &amp;= \left. 2 a_2 t + 3 a_3 t^2 \right|_{t=0}^1\\
    &amp;= 2 a_2 + 3 a_3
\end{align}
\]</span></p>
</div>
</section>
<section id="polynomial-splines-3" class="slide level2">
<h2>Polynomial Splines</h2>
<p>Let’s try to connect 3 numbers <span class="math inline">\(x_1, x_2,
x_3 \in \mathbb R\)</span> using 2 cubic polynomials (with coefficients
<span class="math inline">\(a\)</span> and <span
class="math inline">\(b\)</span>):</p>
<p><span class="math display">\[
\begin{align}
    \mathop{\mathrm{argmin}}_{a_0, a_1, a_2, a_3, b_0, b_1, b_2, b_3}
\quad J_a + J_b \quad \text{s.t.}\\
    p_a(0) = x_1\\
    p_a(1) = x_2\\
    p_b(0) = x_2\\
    p_b(1) = x_3\\
    \dot{p}_a(1) = \dot{p}_b(0)\\
    \ddot{p}_a(1) = \ddot{p}_b(0)
\end{align}
\]</span></p>
</section>
<section id="planning-in-free-space" class="slide level2">
<h2>Planning in Free Space</h2>
<ul>
<li>Optimize splines for each dimension (<span class="math inline">\(x,
y, z, \psi\)</span>)</li>
<li>For position, ensure smoothness at least up to snap (i.e., <span
class="math inline">\(\ddddot{p}_a(1) = \ddddot{p}_b(0)\)</span>; use at
least 5th-order splines)</li>
<li>For yaw, ensure smoothness at least up to acceleration</li>
<li>In practice: 8th-order splines are common</li>
<li>Constrain start to current state</li>
<li>Constrain goal to final/desired state</li>
</ul>
<p>Demo: <code>cubicspline2d.py</code></p>
</section>
<section id="planning-for-aggressive-maneuvers" class="slide level2">
<h2>Planning for Aggressive Maneuvers</h2>
<iframe width="1600" height="500" src="https://www.youtube.com/embed/MvRTALJp8DM?autoplay=1&mute=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p><a href="https://youtu.be/MvRTALJp8DM">YouTube</a></p>
</section>
<section id="planning-for-aggressive-maneuvers-1" class="slide level2">
<h2>Planning for Aggressive Maneuvers</h2>
<p>Assume we have a desired rotation <span
class="math inline">\(\mathbf{R}_d\)</span> at a certain time:</p>
<p>Constrain acceleration to: <span class="math display">\[
\mathbf{\ddot{p}} = \mathbf{g} + r \mathbf{R}_d \mathbf{e}_3, \text{
where } r \in \mathbb R_+
\]</span></p>
</section>
<section id="temporal-scaling" class="slide level2">
<h2>Temporal Scaling</h2>
<p><span class="math display">\[
p(t) = \sum_{k=0}^n a_k t^k \;\; t\in[0,1]
\]</span></p>
<ul>
<li><p>Consider a time horizon <span class="math inline">\(T\)</span>,
i.e., <span class="math inline">\(t\in [0, T]\)</span>: <span
class="math display">\[
      \tilde{p}(t) = \sum_{k=0}^n a_k \left(\frac{t}{T}\right)^k =
\sum_{k=0}^n \frac{a_k}{T^k} t^k = \sum_{k=0}^n \tilde{a}_k t^k \text {
where } \tilde{a}_k = \frac{a_k}{T^k}
\]</span></p></li>
<li><p>Time derivative for cubic spline: <span class="math display">\[
      \tilde{p}&#39;(t) = \tilde{a}_1 + 2 \tilde{a}_2 t + 3 \tilde{a}_3
t^2 = \frac{a_1}{T} + 2 \frac{a_2}{T^2} t + 3 \frac{a_3}{T^3} t^2
\]</span></p></li>
<li><p>The derivative gets smaller for <span class="math inline">\(T
&gt; 1\)</span>: <span class="math inline">\(\lim_{T\to\infty}
\tilde{p}&#39;(t) = 0\)</span></p></li>
</ul>
</section>
<section id="temporal-scaling-1" class="slide level2">
<h2>Temporal Scaling</h2>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> temporalScaling():</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    z(t) <span class="op">=</span> solveQP() <span class="co"># use arbitrary T</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        max_mag <span class="op">=</span> computeMaxLimits(z)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> lower_bound <span class="op">&gt;</span> max_mag: <span class="co"># too slow</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            decrease(T)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> upper_bound <span class="op">&lt;</span> max_mag: <span class="co"># too fast</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            increase(T)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> z(t)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        z(t) <span class="op">=</span> UpdateCoefficients(z(t), T)</span></code></pre></div>
<ul>
<li>Rescaling is fast, since rescaling is just updating the
coefficients</li>
<li>Computing the maxLimits is “costly” (numeric methods)
<ul>
<li>Here: Use differential flatness to compute motor forces, check if
those are within bounds</li>
</ul></li>
</ul>
</section>
<section
id="temporal-scaling-example-polynomialtrajectoryplanningrichter"
class="slide level2">
<h2>Temporal Scaling Example <span class="citation"
data-cites="PolynomialTrajectoryPlanningRichter">(Richter, Bry, and Roy
2013)</span></h2>
<p><img data-src="media/PolynomialTrajectoryPlanningRichter-Fig5.png"
style="width:80.0%" /></p>
</section>
<section id="planning-with-obstacles-mellingerminimumsnaptrajectory2011"
class="slide level2">
<h2>Planning with Obstacles <span class="citation"
data-cites="mellingerMinimumSnapTrajectory2011">(Mellinger and Kumar
2011)</span></h2>
<ul>
<li>At intermediate points, add additional constraints (remains QP)</li>
</ul>
<p><img data-src="media/mellinger2011_fig2.png" /></p>
</section>
<section
id="planning-with-obstacles-polynomialtrajectoryplanningrichter"
class="slide level2">
<h2>Planning with Obstacles <span class="citation"
data-cites="PolynomialTrajectoryPlanningRichter">(Richter, Bry, and Roy
2013)</span></h2>
<ul>
<li>Use sampling-based geometric planning (RRT) + Optimization</li>
<li>If there is a collision, add another waypoint</li>
</ul>
<p><img
data-src="media/PolynomialTrajectoryPlanningRichter-Fig4.png" /></p>
</section>
<section
id="planning-with-obstacles-polynomialtrajectoryplanningrichter-1"
class="slide level2">
<h2>Planning with Obstacles <span class="citation"
data-cites="PolynomialTrajectoryPlanningRichter">(Richter, Bry, and Roy
2013)</span></h2>
<ul>
<li>Or use RRT, with splines in the extent step</li>
</ul>
<p><img
data-src="media/PolynomialTrajectoryPlanningRichter-Fig6.png" /></p>
</section>
<section id="planning-with-obstacles-liusearchbasedmotionplanning2018"
class="slide level2">
<h2>Planning with Obstacles <span class="citation"
data-cites="liuSearchBasedMotionPlanning2018">(Liu et al.
2018)</span></h2>
<ul>
<li>Search-based approach that uses differentially-flatness for edges on
A*</li>
</ul>
<iframe width="1600" height="500" src="https://www.youtube.com/embed/V4Mha-KPtwc?autoplay=1&mute=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p><a href="https://youtu.be/V4Mha-KPtwc">YouTube</a></p>
</section></section>
<section>
<section id="advanced-topics" class="title-slide slide level1">
<h1>Advanced Topics</h1>

</section>
<section id="double-integrator-assumption" class="slide level2">
<h2>Double Integrator Assumption</h2>
<ul>
<li>For many applications double integrator dynamics (and <span
class="math inline">\(\psi=0\)</span>) are used for planning</li>
</ul>
<p><span class="math display">\[
\begin{align}
\mathbf{x}&amp;= [\mathbf{p}, \mathbf{v}]^\top &amp; \mathbf{u}&amp;=
[\mathbf{a}]^\top\\
\dot{\mathbf{x}} &amp;= f(\mathbf{x}, \mathbf{u}) = [\mathbf{v},
\mathbf{a}]
\end{align}
\]</span></p>
<p>From differential flatness (using <span
class="math inline">\(\dddot{\mathbf{p}} = \mathbf{0},
\dot{\psi}=0\)</span>):</p>
<ul>
<li><span class="math inline">\(\mathbf{R}, f\)</span> can be recovered
from <span class="math inline">\(\mathbf{a}\)</span></li>
<li><span class="math inline">\(\boldsymbol{\omega}=\mathbf{0},
\dot{\boldsymbol{\omega}} = \mathbf{0}\)</span></li>
</ul>
<div class="box-ex">
<p>Controller can compensate for missing feed-forward terms for
non-aggressive flight.</p>
</div>
</section>
<section id="hybrid-method-db-a-2024-ortiz-haro-idbaiterativesearch"
class="slide level2">
<h2>Hybrid Method: db-A* <span class="citation"
data-cites="2024-ortiz-haro-IDbAIterativeSearch">(Ortiz-Haro et al.
2024)</span></h2>
<ul>
<li><p>Differential flatness is <em>incomplete</em> (not all possible
motions can be captured), and potentially <em>suboptimal</em>
(optimality in the flat space, does not imply optimality in the full
space)</p></li>
<li><p>iDb-A*: connect short motion primitives (generated by
optimization on the full dynamics) and allow small “jumps”; repair with
optimization</p></li>
</ul>
<p><img data-src="media/idbastar_fig3.png" /></p>
</section>
<section id="hybrid-method-db-a-2024-ortiz-haro-idbaiterativesearch-1"
class="slide level2">
<h2>Hybrid Method: db-A* <span class="citation"
data-cites="2024-ortiz-haro-IDbAIterativeSearch">(Ortiz-Haro et al.
2024)</span></h2>
<p><img data-src="media/idbastar_fig1.png" /></p>
<p>Recovery from up-side down (with low thrust-to-weight ratio).</p>
</section>
<section
id="planning-for-multi-robot-teams-wolfganghonigtrajectoryplanningquadrotor2018"
class="slide level2">
<h2>Planning for Multi-Robot Teams <span class="citation"
data-cites="wolfganghonigTrajectoryPlanningQuadrotor2018">(Hönig et al.
2018)</span></h2>
<ol type="1">
<li>Use discrete search for initial multi-robot path</li>
<li>Assign safe corridors, spline optimization within the corridor</li>
</ol>
<iframe width="1600" height="500" src="https://www.youtube.com/embed/7KIa9FlmbRc?autoplay=1&mute=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p><a href="https://youtu.be/7KIa9FlmbRc">YouTube</a></p>
</section>
<section
id="planning-for-multi-robot-teams-moldagalievadbcbsdiscontinuityboundedconflictbased2024"
class="slide level2">
<h2>Planning for Multi-Robot Teams <span class="citation"
data-cites="moldagalievaDbCBSDiscontinuityBoundedConflictBased2024">(Moldagalieva
et al. 2024)</span></h2>
<ol type="1">
<li>Extend db-A* to the multi-robot world</li>
</ol>
<iframe width="1600" height="500" src="https://www.youtube.com/embed/1mglNQOmOLE?autoplay=1&mute=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p><a href="https://youtu.be/1mglNQOmOLE">YouTube</a></p>
</section>
<section id="nmpc-andor-motion-planning" class="slide level2">
<h2>NMPC and/or Motion Planning</h2>
<ul>
<li>Nonlinear Model Predictive Control (<em>NMPC</em>) solves the
kinodynamic motion planning problem for a fixed (typically short)
horizon</li>
<li>Motion planning has <span class="math inline">\(T\)</span> as
decision variable</li>
</ul>
</section>
<section id="planning-in-the-crazyflie-firmware" class="slide level2">
<h2>Planning in the Crazyflie Firmware</h2>
<ul>
<li><p>Trajectories are represented as 8th order polynomial
splines</p></li>
<li><p>On-board planner uses closed-form solution for goTo (given start
position, velocity, acceleration, compute a single spline segment that
ends at a desired position with all derivates zero)</p></li>
<li><p>Takeoff/Landing uses the exact same spline planner</p></li>
<li><p><a
href="https://github.com/bitcraze/crazyflie-firmware/blob/3d316cc138b057e714cebdce6a1e7dbcc5698d05/src/modules/src/pptraj.c#L148-L178">Code
(Low-Level)</a></p></li>
<li><p><a
href="https://github.com/bitcraze/crazyflie-firmware/blob/master/src/modules/src/planner.c">Code
(High-Level)</a></p></li>
</ul>
</section>
<section id="optimization-on-the-crazyflie" class="slide level2">
<h2>Optimization on the Crazyflie</h2>
<ul>
<li>One can solve (small) QPs on-board using
<ul>
<li><a href="https://osqp.org/docs/codegen/index.html">OSQP</a></li>
<li><a href="https://tinympc.org/">tinyMPC</a></li>
</ul></li>
</ul>
<p>Both have tools that generate specific C-Code from a high-level
(Python) specification.</p>
</section>
<section id="optimization-in-rust" class="slide level2">
<h2>Optimization in Rust</h2>
<ul>
<li><a
href="https://alphaville.github.io/optimization-engine/">Optimization
Engine</a>
<ul>
<li>nonconvex, constrained optimization</li>
<li>For “embedded” applications (meaning RPI etc.)</li>
</ul></li>
<li><a href="https://argmin-rs.org/">argmin</a>
<ul>
<li>only unconstrained problems</li>
</ul></li>
<li><a href="https://github.com/oxfordcontrol/Clarabel.rs">Clarabel</a>
<ul>
<li>Convex optimization, state-of-the-art solver</li>
<li>Not for embedded</li>
<li>Might be <a
href="https://github.com/cvxgrp/cvxpygen/issues/44">supported in
cvxpygen in the future</a></li>
</ul></li>
<li><a href="https://github.com/peterkrull/tinympc-rs">tinyMPC.rs</a>
<ul>
<li>Uses no_std, but nalgebra; not ported to uC</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="assignment-4" class="title-slide slide level1">
<h1>Assignment 4</h1>

</section>
<section id="task" class="slide level2">
<h2>Task</h2>
<p>Generative and validate an aggressive trajectory, exploiting the
differential flatness. For planning, use 8th-order polynomial splines
that are smooth up to and including snap. For validation, propagate the
actions (force, torque) generated by differential flatness using your
simulator and compare the result with the expected values and your
controller.</p>
</section>
<section id="notes" class="slide level2">
<h2>Notes</h2>
<ul>
<li>Only simulation, no flight tests</li>
<li>Temporal scaling not needed</li>
<li>Recommended to use Python (cvxpy) for the optimization, not
Rust</li>
</ul>
</section>
<section id="timeline" class="slide level2">
<h2>Timeline</h2>
<ul>
<li>Feb 7: discussion</li>
<li>Feb 14: discussion/simulation presentation, oral exam, grading</li>
</ul>
</section></section>
<section>
<section id="conclusion" class="title-slide slide level1">
<h1>Conclusion</h1>

</section>
<section id="learned-today" class="slide level2">
<h2>Learned Today</h2>
<ul>
<li>Motion Planning for multirotors
<ul>
<li>Differential flatness: <span class="math inline">\(\mathbf{p},
\psi\)</span> + derivatives map to <span
class="math inline">\(\mathbf{x}, \mathbf{u}\)</span></li>
<li>Planning using polynomial splines</li>
<li>Advanced planning methods (hybrid, multi-robot)</li>
</ul></li>
<li>Assignment 4</li>
</ul>
</section>
<section id="questions" class="slide level2">
<h2>Questions</h2>
<div class="r-fit-text">
<p>?</p>
</div>
</section>
<section id="references-suggested-reading" class="slide level2">
<h2>References / Suggested Reading</h2>
<div id="refs" class="references csl-bib-body hanging-indent"
data-entry-spacing="0" role="list">
<div id="ref-2018-faessler-DifferentialFlatnessQuadrotor"
class="csl-entry" role="listitem">
Faessler, Matthias, Antonio Franchi, and Davide Scaramuzza. 2018.
<span>“Differential Flatness of Quadrotor Dynamics Subject to Rotor Drag
for Accurate Tracking of High-Speed Trajectories.”</span> <em>IEEE
Robotics and Automation Letters</em> 3 (2): 620–26. <a
href="https://doi.org/10.1109/LRA.2017.2776353">https://doi.org/10.1109/LRA.2017.2776353</a>.
</div>
<div id="ref-wolfganghonigTrajectoryPlanningQuadrotor2018"
class="csl-entry" role="listitem">
Hönig, Wolfgang, James A. Preiss, T. K. Satish Kumar, Gaurav S.
Sukhatme, and Nora Ayanian. 2018. <span>“Trajectory Planning for
Quadrotor Swarms.”</span> <em>IEEE Transactions on Robotics, Special
Issue on Aerial Swarm Robotics</em> 34 (4): 856–69. <a
href="https://doi.org/10.1109/TRO.2018.2853613">https://doi.org/10.1109/TRO.2018.2853613</a>.
</div>
<div id="ref-liuSearchBasedMotionPlanning2018" class="csl-entry"
role="listitem">
Liu, Sikang, Kartik Mohta, Nikolay Atanasov, and Vijay Kumar. 2018.
<span>“Search-Based Motion Planning for Aggressive Flight in
SE(3).”</span> <em>IEEE Robotics and Automation Letters</em> 3 (3):
2439–46. <a
href="https://doi.org/10.1109/LRA.2018.2795654">https://doi.org/10.1109/LRA.2018.2795654</a>.
</div>
<div id="ref-mellingerMinimumSnapTrajectory2011" class="csl-entry"
role="listitem">
Mellinger, Daniel, and Vijay Kumar. 2011. <span>“Minimum Snap Trajectory
Generation and Control for Quadrotors.”</span> In <em>2011 IEEE
International Conference on Robotics and Automation</em>, 2520–25. <a
href="https://doi.org/10.1109/ICRA.2011.5980409">https://doi.org/10.1109/ICRA.2011.5980409</a>.
</div>
<div id="ref-moldagalievaDbCBSDiscontinuityBoundedConflictBased2024"
class="csl-entry" role="listitem">
Moldagalieva, Akmaral, Joaquim Ortiz-Haro, Marc Toussaint, and Wolfgang
Hönig. 2024. <span>“Db-CBS: Discontinuity-Bounded Conflict-Based Search
for Multi-Robot Kinodynamic Motion Planning.”</span> March 5, 2024. <a
href="http://arxiv.org/abs/2309.16445">http://arxiv.org/abs/2309.16445</a>.
</div>
<div id="ref-2024-ortiz-haro-IDbAIterativeSearch" class="csl-entry"
role="listitem">
Ortiz-Haro, Joaquim, Wolfgang Hönig, Valentin N. Hartmann, and Marc
Toussaint. 2024. <span>“iDb-a*: Iterative Search and Optimization for
Optimal Kinodynamic Motion Planning.”</span> <em>IEEE Transactions on
Robotics</em>, 1–19. <a
href="https://doi.org/10.1109/TRO.2024.3502505">https://doi.org/10.1109/TRO.2024.3502505</a>.
</div>
<div id="ref-PolynomialTrajectoryPlanningRichter" class="csl-entry"
role="listitem">
Richter, Charles, Adam Bry, and Nicholas Roy. 2013. <span>“Polynomial
Trajectory Planning for Aggressive Quadrotor Flight in Dense Indoor
Environments.”</span> In <em>International Symposium on Robotics
Research (ISRR)</em>, 114:649–66. Springer Tracts in Advanced Robotics.
Springer. <a
href="https://doi.org/10.1007/978-3-319-28872-7_37">https://doi.org/10.1007/978-3-319-28872-7_37</a>.
</div>
</div>
</section></section>
    </div>
  </div>

  <script src="https://unpkg.com/reveal.js@^4/dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="https://unpkg.com/reveal.js@^4/plugin/notes/notes.js"></script>
  <script src="https://unpkg.com/reveal.js@^4/plugin/search/search.js"></script>
  <script src="https://unpkg.com/reveal.js@^4/plugin/zoom/zoom.js"></script>
  <script src="https://unpkg.com/reveal.js@^4/plugin/math/math.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: true,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.2,

        maxScale: 10,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [
          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
